<!DOCTYPE html>
<html lang="en">
  <!-- MIT license | Copyright Dean Attali 2016 -->
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  
  <title>Knitr's best hidden gem: spin</title>
  

  <meta name="author" content="Nitin Singh" />
  
  
  <meta name="description" content="Stop knitting & start spinning - spin can help you write reports much faster and avoid repeating yourself">
  
  
  <meta name="keywords" content="rstats,r,r shiny,shiny apps,r shiny apps,shiny developer,r shiny developer,shiny consultant,web application development with r using shiny">

  <link rel="alternate" type="application/rss+xml" title="Nitin Singh - A computer science student persuing B.TECH from IIITVADODARA and a programming enthusiast." href="/feed.xml" />

  
    
      <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" />
    
      
  
  
    
      <link rel="stylesheet" href="/css/bootstrap.min.css" />
    
      <link rel="stylesheet" href="/css/bootstrap-social.css" />
    
      <link rel="stylesheet" href="/css/main.css" />
    
    
  
  
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
    
  

    
  
  

  
  
  <!-- Facebook OpenGraph tags -->
  
  <meta property="og:title" content="Knitr's best hidden gem: spin" />
  
  
  <meta property="og:type" content="website" />
  
  
  <meta property="og:url" content="http://localhost:4000/2015/03/24/knitrs-best-hidden-gem-spin/" />
  <link rel="canonical" href="http://localhost:4000/2015/03/24/knitrs-best-hidden-gem-spin/" />
  
  
  
  <meta property="og:image" content="http://localhost:4000/img/deanimg.jpeg" />
  

  <!-- Twitter summary cards -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@nitinitleen1" />
  <meta name="twitter:creator" content="@nitinitleen1" />
  <meta name="twitter:title" content="Knitr's best hidden gem: spin" />
  <meta name="twitter:description" content="Anyone who loves the idea of dynamic report generation with R is probably a big fan of knitr and its flagship function - knit. But not many people seem to know about knit’s awesome cousin - spin. What is spin? In short: knitr::spin is similar to knitr::knit in that it..." />
  
  <meta name="twitter:image" content="http://localhost:4000/img/deanimg.jpeg" />
    

</head>


  <body>
  
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom ">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://localhost:4000">Nitin Singh</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
      
        
          <li>
            
            





<a href="/">Blog</a>

          </li>
        
        
        
          <li>
            
            





<a href="/shiny">Shiny</a>

          </li>
        
        
        
          <li>
            
            





<a href="/projects">Projects</a>

          </li>
        
        
        
          <li>
            
            





<a href="/aboutme">About Me / Contact</a>

          </li>
        
        
		
		
		<li>
		  <a href="/search" class="nav-search-link" title="Search">
		    <span class="fa fa-search nav-search-icon"></span>
			<span class="nav-search-text">Search</span>
		  </a>
		</li>
		
      </ul>
    </div>
	
	
	<div class="avatar-container">
	  <div class="avatar-img-border">
	    <a href="http://localhost:4000 ">
	      <img class="avatar-img" src="/img/deanimg.jpeg" />
		</a>
	  </div>
	</div>
	
	
  </div>
</nav>  


    <!-- TODO this file has become a mess, refactor it -->





<header class="header-section ">

<div class="intro-header no-img">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <h1>Knitr's best hidden gem: spin</h1>
		  
		    
			<h2 class="post-subheading">Stop knitting & start spinning - spin can help you write reports much faster and avoid repeating yourself</h2>
			
		  
		  
		  
		  <span class="post-meta">Posted on March 24, 2015</span>
		  
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
      	<p>Anyone who loves the idea of dynamic report generation with R is probably a big fan of <a href="http://yihui.name/knitr/"><code class="highlighter-rouge">knitr</code></a> and its flagship function - <code class="highlighter-rouge">knit</code>.  But not many people seem to know about <code class="highlighter-rouge">knit</code>’s awesome cousin - <code class="highlighter-rouge">spin</code>.</p>

<h3 id="what-is-spin">What is spin?</h3>

<p>In short: <code class="highlighter-rouge">knitr::spin</code> is similar to <code class="highlighter-rouge">knitr::knit</code> in that it takes as input a file with R code + formatting + text and produces a nice readable report, such as an HTML or markdown document. The difference lies in the input: <code class="highlighter-rouge">spin</code> operates on R scripts (<code class="highlighter-rouge">.R</code>), while <code class="highlighter-rouge">knit</code> requires a literate programming file (<code class="highlighter-rouge">.Rmd</code>, <code class="highlighter-rouge">.Rnw</code>, etc.). This might not sound like a big deal, but it has some important advantages that I’ll describe soon.</p>

<p><em>Disclaimer: I may have a simplistic and non-comprehensive view of spin and knit; knit certainly has many features that I’ve yet to explore. I’m also going to talk only about the Rmd/md formats and not about any Sweave/LaTeX/HTML for simplicity.</em></p>

<p>Using <code class="highlighter-rouge">spin</code> to turn your R script into markdown output is very simple:</p>

<ul>
  <li>Any line beginning with <code class="highlighter-rouge">#'</code> is treated as a markdown directive (<code class="highlighter-rouge">#' # title</code> will be a header, <code class="highlighter-rouge">#' some **bold** text</code> results in <code class="highlighter-rouge">some </code><strong><code class="highlighter-rouge">bold</code></strong><code class="highlighter-rouge"> text</code>)</li>
  <li>Any line beginning with <code class="highlighter-rouge">#+</code> is parsed as code chunk options</li>
  <li>Run <code class="highlighter-rouge">knitr::spin</code> on the file</li>
</ul>

<h3 id="the-problem-that-spin-solves">The problem that spin solves</h3>

<p>I’ve noticed a problem with the common approach that I adapted (and I know my colleagues use a similar approach) when creating R markdown (<code class="highlighter-rouge">.Rmd</code>) documents.  There are many usecases to R markdown - whether it be showing the output from a homework assignment, a report to show a peer about your data, or just a report for yourself to more easily see and store results - and a common workflow is this:</p>

<ul>
  <li>Write a bunch of interactive statements in an .R script</li>
  <li>Once my R code is ready, polish the code and make sure it runs smoothly when <code class="highlighter-rouge">source</code>d</li>
  <li>Copy the code to a .Rmd file, add text with formatting, surround code in code chunks</li>
  <li>Repeat the above several times until the final .Rmd is ready</li>
</ul>

<p>The main thing to note here is that <strong>my whole analysis is now duplicated in two files</strong>: in the original R file as regular code, and in the Rmd file as code chunks. I’m breaking the DRY principle (Don’t Repeat Yourself).  The problem is that now, because my code is in two places, I have a lot more work to maintain the code.  What if next week I want to change a parameter? I’d have to remember to make the exact same change in both the R source code and the Rmd file, so that the report will still match the R script. Having to manage only one source as opposed to keeping two in sync makes my life much simpler.</p>

<h3 id="enter-spin">Enter: <code class="highlighter-rouge">spin</code></h3>

<p>With <code class="highlighter-rouge">spin</code>, your original R source code is being converted into Rmd and then into a final report format automatically. It’s as if <code class="highlighter-rouge">spin</code> is saving you the step of going from R to Rmd. The big benefit here, again, is not just saving the time in writing the Rmd, but the fact that you now have only one copy of your code that you need to maintain.</p>

<p>Once your have some R code that runs, if you want to create a markdown report from it, it’s very easy with <code class="highlighter-rouge">spin</code>.  You could just go ahead and run <code class="highlighter-rouge">spin</code> on pure R, and it’ll work - you’ll get back a markdown file with all the results. It won’t be pretty yet, but it’ll just work right away.  To format it better, all you need to do is add some markdown (text) prepended with <code class="highlighter-rouge">#'</code>, and potentially add chunk options  with <code class="highlighter-rouge">#+</code> before every code chunk.  You don’t have to copy your code to a different file format and have it be broken until it’s inside a proper code chunk.</p>

<p><strong>Bonus:</strong> if you use <code class="highlighter-rouge">spin</code>, you can still run your code like a normal R file. You can select a bunch of lines and run them, or just <code class="highlighter-rouge">source</code> the entire file, and it’ll run as R code. When you want to create a report, just call <code class="highlighter-rouge">spin</code>. If you’re used to writing Rmd files, you may also be a bit annoyed that you can’t simply select lines and run them if those lines are not all inside a code chunk. It’s not an R file, and can’t be treated that way.</p>

<p><strong>Bonus #2:</strong> I find it much easier and faster to convert a regular R script to a spin-formatted R script than to a Rmd file. To convert a block of code into a code chunk for <code class="highlighter-rouge">spin</code>, you just have to add <code class="highlighter-rouge">#+</code> before the chunk.  To convert a block of code into a code chunk in Rmd, you need to add text in two different places - <code class="highlighter-rouge">```{r}</code> before the chunk and <code class="highlighter-rouge">```</code> after.</p>

<h3 id="people-dont-know-about-spin">People don’t know about spin</h3>

<p>The reason I’m writing this is because I believe that <code class="highlighter-rouge">spin</code> is very useful but is not very well known.</p>

<p>I was recently at an R workshop taught by <a href="http://had.co.nz/">Hadley Wickham</a> and chatted with some fellow R enthusiasts about knitr.  Out of the 10 useRs I asked, none of them were aware of <code class="highlighter-rouge">knitr::spin</code>. I also conducted a similar survey at the labs where I work, and while everyone I asked was an avid user of <code class="highlighter-rouge">knitr</code>, nobody knew about <code class="highlighter-rouge">spin</code>. I know that my sample size is rather small and I haven’t done any proper statistical significance testing, but I’d say the lack of awareness of <code class="highlighter-rouge">spin</code> is quite significant.</p>

<h3 id="knit-is-still-amazing"><code class="highlighter-rouge">knit</code> is still amazing</h3>

<p>I’m not trying to say that <code class="highlighter-rouge">knit</code> has no place - it’s very popular for a good reason. But in my opinion, before producing a HTML/markdown file from your R code, you should consider whether using <code class="highlighter-rouge">spin</code> (pure R code) or <code class="highlighter-rouge">knit</code> (need to manually convert your R to Rmd) will be more efficient.   I think if the output is very text-heavy and focuses a lot more on formatting and visual, and only includes some bits of R code here and there, then <code class="highlighter-rouge">knit</code> would be more appropriate.  But if a report is primarily a way to showcase a lot of code, with intermittent text, then <code class="highlighter-rouge">spin</code> can save you a lot of trouble.</p>

<h3 id="example">Example</h3>

<p>Ever since my supervisor <a href="https://twitter.com/JennyBryan">Jenny Bryan</a> told me about <code class="highlighter-rouge">spin</code>, I’ve been using it extensively and it has replaced my use of <code class="highlighter-rouge">knit</code> in many circumstances. Every time I have some code that I need to show in a nice format to someone else, I just add some text with <code class="highlighter-rouge">#'</code> and add code chunk options where needed.</p>

<p>For example, <a href="https://github.com/daattali/UBC-STAT545/blob/master/hw/hw12_web-scraping-api/hw12_web-scraping-api.md">here</a> is the markdown output from using <code class="highlighter-rouge">spin</code> on <a href="https://github.com/daattali/UBC-STAT545/blob/master/hw/hw12_web-scraping-api/hw12_web-scraping-api.R">this</a> R file. It would have been a lot of work to make a Rmd file after writing all the R code, and it would have been annoying to change both files any time in the future.</p>

<hr />

<h3 id="edit">Edit</h3>
<p>As has been pointed out <a href="https://twitter.com/daattali/status/580596838044160000">on my tweet about this post</a>, you don’t <em>have</em> to call <code class="highlighter-rouge">spin</code> in order to get an output from an R file. The “compile notebook” button in RStudio, which calls the <code class="highlighter-rouge">rmarkdown::render</code> function, will achieve a similar result if given an R input. This is because <code class="highlighter-rouge">render</code> actually calls <code class="highlighter-rouge">spin</code> under the hood.  It doesn’t really matter if you choose to call <code class="highlighter-rouge">spin</code> or to call <code class="highlighter-rouge">render</code> - both functions require the same R sript as input rather than an Rmd (or any other literate programming file). <strong>The main point here is to show that starting with an R script to produce these outputs is merely possible by using roxygen comments, because I felt that too many people assume their R script has to be manually converted to a different format.</strong>  So spin/render/notebook away :)</p>

<p>There is one nice benefit for <code class="highlighter-rouge">render</code> as Jenny Bryan mentioned - it will automatically detect what format your input is, and either call <code class="highlighter-rouge">spin</code> or <code class="highlighter-rouge">knit</code> or whatever is most appropriate.</p>

      </article>
      
      
        <div class="blog-tags">
          Tags: professional, rstats, r, r-bloggers, knitr, spin
        </div>
      

      
  <div class="share-section">
    <h1 class="share-title">Liked what you read?</h1>
    
    
      <div class="share-buttons">
        
        
        
        
    
        
        
        
        
        <a href="http://localhost:4000/contact" data-ga-event=1 data-ga-category="share" data-ga-action="message" data-ga-label="/2015/03/24/knitrs-best-hidden-gem-spin/">
          Let me know
        </a>
        <!--
        <a href="https://www.facebook.com/dialog/feed?app_id=536330676521989&link=http://localhost:4000/2015/03/24/knitrs-best-hidden-gem-spin/&name=Knitr's best hidden gem: spin&caption=nitinitleen1.github.io&redirect_uri=http://localhost:4000/2015/03/24/knitrs-best-hidden-gem-spin/?message=Thanks for sharing!" data-ga-event=1 data-ga-category="share" data-ga-action="facebook" data-ga-label="/2015/03/24/knitrs-best-hidden-gem-spin/">
          Share on Facebook
        </a>
        -->
        <a href="https://www.paypal.me/daattali/10" data-ga-event=1 data-ga-category="share" data-ga-action="donate" data-ga-label="/2015/03/24/knitrs-best-hidden-gem-spin/">
          Support me
        </a>
        <a href="https://twitter.com/intent/tweet?url=http://localhost:4000/2015/03/24/knitrs-best-hidden-gem-spin/&via=daattali&hashtags=rstats&text=Knitr's best hidden gem: spin" data-ga-event=1 data-ga-category="share" data-ga-action="twitter" data-ga-label="/2015/03/24/knitrs-best-hidden-gem-spin/">
          Tweet it
        </a>
      </div>
    
    
    
      <!-- MailChimp Signup Form -->
      <div id="mailchimp-subscribe-section-2">
        <div id="mc_embed_signup-2">
          <form action="//deanattali.us14.list-manage.com/subscribe/post?u=a579a88c8f09f9b8502b9d0c3&amp;id=c180f5773c" method="post" id="mc-embedded-subscribe-form-2" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
            <div id="mc_embed_signup_scroll-2">
      	      <label for="mce-EMAIL-2">Sign up to my Shiny newsletter</label>
              <div class="container">
                <div class="row">
                  <div class="col-xs-8">
                    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL-2" placeholder="Email" required="">
                  </div>
                  <div class="col-xs-4">
                    <input type="text" value="" name="FNAME" class="text" id="mce-FNAME-2" placeholder="Name" required="">
                  </div>
                </div>
              </div>
              <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_a579a88c8f09f9b8502b9d0c3_c180f5773c" tabindex="-1" value=""></div>
              <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe-2" class="button">
            </div>
          </form>
        </div>
      </div>
     

  </div>


      
      

      <ul class="pager blog-pager">
        
          <li class="previous">
            <a href="/2015/03/12/beautiful-jekyll-how-to-build-a-site-in-minutes/" data-toggle="tooltip" data-placement="top" title="Beautiful Jekyll - how to build a site in minutes">&larr; Previous Post</a>
          </li>
        
        
          <li class="next">
            <a href="/2015/03/29/ggExtra-r-package/" data-toggle="tooltip" data-placement="top" title="ggExtra: R package for adding marginal histograms to ggplot2">Next Post &rarr;</a>
          </li>
        
      </ul>

      
        <div class="disqus-comments">
          
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">
	    var disqus_shortname = 'nitin-site';
	    // ensure that pages with query string or anchor get the same discussion
            var url_parts = window.location.href.split("?");
            url_parts = url_parts[0].split("#");
            disqus_url = url_parts[0];
            disqus_url = disqus_url.replace(/(\/)*$/, "/"); // make sure the URL ends with one slash
            
            // Jekyll 3 caused so many bugs, I'm tired of fixing them one by one properly, so I'll just hack it...
            // https://github.com/jekyll/jekyll/issues/4483
            // The projects page now has a trailing slash, it didn't used to
            if (disqus_url.substr(-9) == "projects/") {
            	disqus_url = disqus_url.substr(0, disqus_url.length - 1);
            }

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>


        </div>
      
      
      <div id="scroll-box">
  <div id="scroll-box-close">&times;</div>
  <div id="scroll-box-hire">
    Need Shiny help?
    <a href="/shiny">Hire me!</a>
  </div>
  <div id="mailchimp-subscribe-section">
    <div id="mc_embed_signup">
      <form action="//deanattali.us14.list-manage.com/subscribe/post?u=a579a88c8f09f9b8502b9d0c3&amp;id=c180f5773c" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
        <div id="mc_embed_signup_scroll">
  	      <label for="mce-EMAIL">Sign up to my Shiny newsletter</label>
          <div class="container">
            <div class="row">
              <div class="col-xs-8">
  	            <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Email" required="">
              </div>
              <div class="col-xs-4">
                <input type="text" value="" name="FNAME" class="text" id="mce-FNAME" placeholder="Name" required="">
              </div>
            </div>
          </div>
          <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_a579a88c8f09f9b8502b9d0c3_c180f5773c" tabindex="-1" value=""></div>
          <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button" title="Sign up to my Shiny newsletter">
        </div>
      </form>
    </div>
  </div>
  <div id="scroll-box-contact">
    Questions/comments?
    <a href="/contact">Contact me!</a>
  </div>
</div>

    </div>
  </div>
</div>


    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">

          
          <li>
            <a href="mailto:nitin.iiitv@gmail.com?subject=Hello from nitinitleen1.github.io" title="Email me">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/nitinitleen1" title="Twitter">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://github.com/nitinitleen1" title="GitHub">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://www.facebook.com/nitinitleen1" title="Facebook">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://stackoverflow.com/nitinitleen1" title="StackOverflow">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          

          

        </ul>

        <p class="copyright text-muted">
          &copy; Nitin Singh
          &nbsp;&bull;&nbsp;
          2017

          
          &nbsp;&bull;&nbsp;
          <a href="mailto:nitin.iiitv@gmail.com?subject=Hello from nitinitleen1.github.io">nitin.iiitv@gmail.com</a>
          
        </p>
        <p class="theme-by text-muted">
          Theme by
          <a href="http://deanattali.com/beautiful-jekyll/">beautiful-jekyll</a>
        </p>
      </div>
    </div>
  </div>
</footer>

    
    


  
	<script src="/js/jquery-1.11.2.min.js"></script>
  
	<script src="/js/bootstrap.min.js"></script>
  
	<script src="/js/js.cookie.js"></script>
  
	<script src="/js/main.js"></script>
  







	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-59820529-1', 'auto');
		ga('send', 'pageview');
	</script>
	<!-- End Google Analytics -->



     
      <!-- AddThis plugin (floating social media sharing buttons on the left of each post) -->
      <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-57d65a4d97789dd1"></script>
    
    
  </body>
</html>
