<!DOCTYPE html>
<html lang="en">
  <!-- MIT license | Copyright Dean Attali 2016 -->
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  
  <title>Introducing shinyjs: perform common JavaScript operations in Shiny apps using plain R code</title>
  

  <meta name="author" content="Nitin Singh" />
  
  
  <meta name="description" content="shinyjs is my second R package that managed to find its way past the CRAN review process. It lets you perform common useful JavaScript operations in Shiny applications without having to know any JavaScript. Important note The package has improved a lot since writing this post. I highly recommend you...">
  
  
  <meta name="keywords" content="rstats,r,r shiny,shiny apps,r shiny apps,shiny developer,r shiny developer,shiny consultant,web application development with r using shiny">

  <link rel="alternate" type="application/rss+xml" title="Nitin Singh - A computer science student persuing B.TECH from IIITVADODARA and a programming enthusiast." href="/feed.xml" />

  
    
      <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" />
    
      
  
  
    
      <link rel="stylesheet" href="/css/bootstrap.min.css" />
    
      <link rel="stylesheet" href="/css/bootstrap-social.css" />
    
      <link rel="stylesheet" href="/css/main.css" />
    
    
  
  
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
    
  

    
  
  

  
  
  <!-- Facebook OpenGraph tags -->
  
  <meta property="og:title" content="Introducing shinyjs: perform common JavaScript operations in Shiny apps using plain R code" />
  
  
  <meta property="og:type" content="website" />
  
  
  <meta property="og:url" content="http://localhost:4000/2015/04/23/shinyjs-r-package/" />
  <link rel="canonical" href="http://localhost:4000/2015/04/23/shinyjs-r-package/" />
  
  
  
  <meta property="og:image" content="http://localhost:4000/img/deanimg.jpeg" />
  

  <!-- Twitter summary cards -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@nitinitleen1" />
  <meta name="twitter:creator" content="@nitinitleen1" />
  <meta name="twitter:title" content="Introducing shinyjs: perform common JavaScript operations in Shiny apps using plain R code" />
  <meta name="twitter:description" content="shinyjs is my second R package that managed to find its way past the CRAN review process. It lets you perform common useful JavaScript operations in Shiny applications without having to know any JavaScript. Important note The package has improved a lot since writing this post. I highly recommend you..." />
  
  <meta name="twitter:image" content="http://localhost:4000/img/deanimg.jpeg" />
    

</head>


  <body>
  
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom ">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://localhost:4000">Nitin Singh</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
      
        
          <li>
            
            





<a href="/">Blog</a>

          </li>
        
        
        
          <li>
            
            





<a href="/shiny">Shiny</a>

          </li>
        
        
        
          <li>
            
            





<a href="/projects">Projects</a>

          </li>
        
        
        
          <li>
            
            





<a href="/aboutme">About Me / Contact</a>

          </li>
        
        
		
		
		<li>
		  <a href="/search" class="nav-search-link" title="Search">
		    <span class="fa fa-search nav-search-icon"></span>
			<span class="nav-search-text">Search</span>
		  </a>
		</li>
		
      </ul>
    </div>
	
	
	<div class="avatar-container">
	  <div class="avatar-img-border">
	    <a href="http://localhost:4000 ">
	      <img class="avatar-img" src="/img/deanimg.jpeg" />
		</a>
	  </div>
	</div>
	
	
  </div>
</nav>  


    <!-- TODO this file has become a mess, refactor it -->





<header class="header-section ">

<div class="intro-header no-img">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <h1>Introducing shinyjs: perform common JavaScript operations in Shiny apps using plain R code</h1>
		  
		  
		  
		  <span class="post-meta">Posted on April 24, 2015</span>
		  
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
      	<p><code class="highlighter-rouge">shinyjs</code> is my second R package that managed to find its way past the CRAN review process.
It lets you perform common useful JavaScript operations in Shiny
applications without having to know any JavaScript.</p>

<h1 id="important-note">Important note</h1>

<p><strong>The package has improved a lot since writing this post. I highly recommend you stop reading this page and instead go the <a href="http://deanattali.com/shinyjs">shinyjs website</a>.</strong></p>

<div style="text-align:center;">
<a style="text-decoration: none;" class="btn btn-success btn-lg" href="http://deanattali.com/shinyjs">shinyjs website</a>
</div>

<h2 id="demos">Demos</h2>

<p>You can <a href="http://daattali.com/shiny/shinyjs-demo/">check out a demo Shiny app</a> (<a href="https://daattali.shinyapps.io/shinyjs-demo/">mirror</a>) that lets you
play around with some of the functionality that <code class="highlighter-rouge">shinyjs</code> makes
available, or <a href="http://daattali.com/shiny/shinyjs-basic/">have a look at a very basic Shiny
app</a> (<a href="https://daattali.shinyapps.io/shinyjs-basic/">mirror</a>) that uses <code class="highlighter-rouge">shinyjs</code> to
enhance the user experience with very minimal and simple R code.</p>

<h2 id="availability">Availability</h2>

<p><code class="highlighter-rouge">shinyjs</code> is available through both <a href="http://cran.r-project.org/web/packages/shinyjs/">CRAN</a>
(<code class="highlighter-rouge">install.packages("shinyjs")</code>) and <a href="https://github.com/daattali/shinyjs">GitHub</a>
(<code class="highlighter-rouge">devtools::install_github("daattali/shinyjs")</code>).</p>

<h2 id="motivation">Motivation</h2>

<p>Shiny is a fantastic R package provided by RStudio that lets you turn
any R code into an interactive webpage. It’s very powerful and one of
the most useful packages in my opinion. But there are just a few simple
pieces of functionality that I always find missing and I implement
myself in my Shiny apps using JavaScript (JS) because it’s either not
supported natively by Shiny or it’s just cleaner to do so. Simple things
like showing/hiding elements, enabling/disabling a button, showing a
popup message to the user, manipulating the CSS class or HTML content of
an element, etc.</p>

<p>After noticing that I’m writing the same JS code in all my apps, and
since making Shiny talk to JS is a bit tedious and annoying with all the
message passing, I decided to just package it to make it easily
reusable. Now I can simply call <code class="highlighter-rouge">hide("panel")</code> or <code class="highlighter-rouge">disable("button")</code>.
I was lucky enough to have previous experience with JS so I knew how to
achieve the results that I wanted, but for any Shiny developer who is
not proficient in JS, hopefully this package will make it easy to extend
the power of their Shiny apps.</p>

<h2 id="overview-of-main-functions">Overview of main functions</h2>

<ul>
  <li>
    <p><code class="highlighter-rouge">show</code>/<code class="highlighter-rouge">hide</code>/<code class="highlighter-rouge">toggle</code> - display or hide an element. There are
arguments that control the animation as well, though animation is
off by default.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">hidden</code> - initialize a Shiny tag as invisible (can be shown later
with a call to <code class="highlighter-rouge">show</code>)</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">enable</code>/<code class="highlighter-rouge">disable</code>/<code class="highlighter-rouge">toggleState</code> - enable or disable an input
element, such as a button or a text input.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">info</code> - show a message to the user (using JavaScript’s <code class="highlighter-rouge">alert</code>
under the hood)</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">html</code> - change the text/HTML of an element (using JavaScript’s
<code class="highlighter-rouge">innerHTML</code> under the hood)</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">onclick</code> - run R code when an element is clicked. Was originally
developed with the sole purpose of running a <code class="highlighter-rouge">shinyjs</code> function when
an element is clicked, though any R code can be used.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">addClass</code>/<code class="highlighter-rouge">removeClass</code>/<code class="highlighter-rouge">toggleClass</code> - add or remove a CSS class
from an element</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">inlineCSS</code> - easily add inline CSS to a Shiny app</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">logjs</code> - print a message to the JavaScript console (mainly used for
debugging purposes)</p>
  </li>
</ul>

<p><a href="http://daattali.com/shiny/shinyjs-demo/">Check out the demo Shiny app</a> (<a href="https://daattali.shinyapps.io/shinyjs-demo/">mirror</a>)
to see some of these in action, or install <code class="highlighter-rouge">shinyjs</code> and run
<code class="highlighter-rouge">shinyjs::runExample()</code> to see more demo apps.</p>

<h2 id="basic-use-case---working-example">Basic use case - working example</h2>

<p><em>You can view the final Shiny app developed in this simple example
<a href="http://daattali.com/shiny/shinyjs-basic/">here</a> (<a href="https://daattali.shinyapps.io/shinyjs-basic/">mirror</a>).</em></p>

<p>Suppose we want to have a simple Shiny app that collects a user’s basic
information (name, age, company) and submits it, along with the time of
submission. Here is a very simple implementation of such an app (nothing
actually happens when the user “submits”).</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">shiny</span><span class="p">)</span><span class="w">
</span><span class="n">shinyApp</span><span class="p">(</span><span class="w">
  </span><span class="n">ui</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fluidPage</span><span class="p">(</span><span class="w">
    </span><span class="n">div</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"myapp"</span><span class="p">,</span><span class="w">
      </span><span class="n">h</span><span class="m">2</span><span class="p">(</span><span class="s2">"shinyjs demo"</span><span class="p">),</span><span class="w">
      </span><span class="n">textInput</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Name"</span><span class="p">,</span><span class="w"> </span><span class="s2">""</span><span class="p">),</span><span class="w">
      </span><span class="n">numericInput</span><span class="p">(</span><span class="s2">"age"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Age"</span><span class="p">,</span><span class="w"> </span><span class="m">30</span><span class="p">),</span><span class="w">
      </span><span class="n">textInput</span><span class="p">(</span><span class="s2">"company"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Company"</span><span class="p">,</span><span class="w"> </span><span class="s2">""</span><span class="p">),</span><span class="w">
      </span><span class="n">p</span><span class="p">(</span><span class="s2">"Timestamp: "</span><span class="p">,</span><span class="w"> </span><span class="n">span</span><span class="p">(</span><span class="n">date</span><span class="p">())),</span><span class="w">
      </span><span class="n">actionButton</span><span class="p">(</span><span class="s2">"submit"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Submit"</span><span class="p">)</span><span class="w">
    </span><span class="p">)</span><span class="w">
  </span><span class="p">),</span><span class="w">
  
  </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">output</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p><em>Note that I generally don’t like running Shiny apps like this and
prefer to declare the UI and server separately, but I do it like this
here for brevity.</em></p>

<p>Here is what that app would look like</p>

<p><a href="http://localhost:4000/img/blog/shinyjs/basic-v1.png"><img src="http://localhost:4000/img/blog/shinyjs/basic-v1.png" alt="Demo app" /></a></p>

<p>Now suppose we want to add a few features to the app to make it a bit
more user-friendly. First we need to set up the app to use <code class="highlighter-rouge">shinyjs</code>
with two small changes</p>

<ol>
  <li>
    <p>A call to <code class="highlighter-rouge">useShinyjs()</code> needs to be made in the Shiny app’s UI.
This is required to set up all the JavaScript and a few other
things.</p>
  </li>
  <li>
    <p>The app’s server needs to have the <code class="highlighter-rouge">session</code> parameter declared, ie.
initialize the server as <code class="highlighter-rouge">server(input, output, session)</code> instead of
<code class="highlighter-rouge">server(input, output)</code>.</p>
  </li>
</ol>

<p>Here are 6 features we’ll add to the app, each followed with the code to
implement it using <code class="highlighter-rouge">shinyjs</code>:</p>

<p><strong>1. The “Name” field is mandatory and thus the “Submit” button should
not be enabled if there is no name</strong></p>

<p>In the server portion, add the following code</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">observe</span><span class="p">({</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">is.null</span><span class="p">(</span><span class="n">input</span><span class="o">$</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">""</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">shinyjs</span><span class="o">::</span><span class="n">disable</span><span class="p">(</span><span class="s2">"submit"</span><span class="p">)</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">shinyjs</span><span class="o">::</span><span class="n">enable</span><span class="p">(</span><span class="s2">"submit"</span><span class="p">)</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">})</span><span class="w">
</span></code></pre>
</div>

<p>Or instead you can use the <code class="highlighter-rouge">toggleState</code> function and pass it a <code class="highlighter-rouge">condition</code>:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">observe</span><span class="p">({</span><span class="w">
  </span><span class="n">shinyjs</span><span class="o">::</span><span class="n">toggleState</span><span class="p">(</span><span class="s2">"submit"</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="nf">is.null</span><span class="p">(</span><span class="n">input</span><span class="o">$</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">name</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s2">""</span><span class="p">)</span><span class="w">
</span><span class="p">})</span><span class="w">
</span></code></pre>
</div>

<p>You can use the optional <code class="highlighter-rouge">condition</code> in some other functions as well, which can be very useful to make your code shorter and more understandable.</p>

<p><strong>2. The “Age” and “Company” fields are optional and we want to have the
ability to hide that section of the form</strong></p>

<p>First, we need to section off the “Age” and “Company” elements into
their own section, so we surround them with a <code class="highlighter-rouge">div</code></p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">div</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"advanced"</span><span class="p">,</span><span class="w">
  </span><span class="n">numericInput</span><span class="p">(</span><span class="s2">"age"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Age"</span><span class="p">,</span><span class="w"> </span><span class="m">30</span><span class="p">),</span><span class="w">
  </span><span class="n">textInput</span><span class="p">(</span><span class="s2">"company"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Company"</span><span class="p">,</span><span class="w"> </span><span class="s2">""</span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p>We also need to add a link in the UI that will be used to hide/show the
section</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">a</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"toggleAdvanced"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Show/hide advanced info"</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p>Lastly, we need to tell Shiny to show/hide the section when the link is
clicked by adding this code to the server</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">shinyjs</span><span class="o">::</span><span class="n">onclick</span><span class="p">(</span><span class="s2">"toggleAdvanced"</span><span class="p">,</span><span class="w">
                  </span><span class="n">shinyjs</span><span class="o">::</span><span class="n">toggle</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"advanced"</span><span class="p">,</span><span class="w"> </span><span class="n">anim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">))</span><span class="w">
</span></code></pre>
</div>

<p><strong>3. Similarly, since we don’t really care about “Age” and “Company” too
much, we want to hide them initially when the form loads</strong></p>

<p>Simply surround the section we want to hide initially with
<code class="highlighter-rouge">shinyjs::hidden</code></p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">shinyjs</span><span class="o">::</span><span class="n">hidden</span><span class="p">(</span><span class="w">
  </span><span class="n">div</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"advanced"</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
</span><span class="p">))</span><span class="w">
</span></code></pre>
</div>

<p><strong>4. The user should be able to update the “Timestamp” in case he spends
way too long filling out the form (not very realistic here, and the
timestamp should ideally be determined when the button is clicked, but
it’s good enough for illustration purposes)</strong></p>

<p>First, we need to add an “Update” link to click on, and we need to give
the element showing the time an <code class="highlighter-rouge">id</code> so that we can refer to it later
when we want to change its contents.</p>

<p>To do that, replace <code class="highlighter-rouge">p("Timestamp: ", span(date()))</code> with</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">p</span><span class="p">(</span><span class="s2">"Timestamp: "</span><span class="p">,</span><span class="w"> </span><span class="n">span</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"time"</span><span class="p">,</span><span class="w"> </span><span class="n">date</span><span class="p">()),</span><span class="w"> </span><span class="n">a</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"update"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Update"</span><span class="p">))</span><span class="w">
</span></code></pre>
</div>

<p>Now we need to tell Shiny what to do when “Update” is clicked by adding
this to the server</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">shinyjs</span><span class="o">::</span><span class="n">onclick</span><span class="p">(</span><span class="s2">"update"</span><span class="p">,</span><span class="w"> </span><span class="n">shinyjs</span><span class="o">::</span><span class="n">html</span><span class="p">(</span><span class="s2">"time"</span><span class="p">,</span><span class="w"> </span><span class="n">date</span><span class="p">()))</span><span class="w">
</span></code></pre>
</div>

<p><strong>5. Some users may find it hard to read the small text in the app, so
there should be an option to increase the font size</strong></p>

<p>First, we need to add checkbox to the UI</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">checkboxInput</span><span class="p">(</span><span class="s2">"big"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Bigger text"</span><span class="p">,</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p>In order to make the text bigger, we will use CSS. So let’s add an
appropriate CSS rule by adding this code to the UI
<code class="highlighter-rouge">r
shinyjs::inlineCSS(list(.big = "font-size: 2em"))
</code></p>

<p>Lastly, we want the text to be big or small depending on whether the
checkbox is checked by adding this code to the server</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">observe</span><span class="p">({</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">input</span><span class="o">$</span><span class="n">big</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">shinyjs</span><span class="o">::</span><span class="n">addClass</span><span class="p">(</span><span class="s2">"myapp"</span><span class="p">,</span><span class="w"> </span><span class="s2">"big"</span><span class="p">)</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">shinyjs</span><span class="o">::</span><span class="n">removeClass</span><span class="p">(</span><span class="s2">"myapp"</span><span class="p">,</span><span class="w"> </span><span class="s2">"big"</span><span class="p">)</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">})</span><span class="w">
</span></code></pre>
</div>

<p>Or, again, we can use the <code class="highlighter-rouge">toggleClass</code> function with the <code class="highlighter-rouge">condition</code> argument:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">observe</span><span class="p">({</span><span class="w">
  </span><span class="n">toggleClass</span><span class="p">(</span><span class="s2">"myapp"</span><span class="p">,</span><span class="w"> </span><span class="s2">"big"</span><span class="p">,</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">big</span><span class="p">)</span><span class="w">
</span><span class="p">})</span><span class="w">
</span></code></pre>
</div>

<p><strong>6. Give the user a “Thank you” message upon submission</strong></p>

<p>Simply add the following to the server</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">observe</span><span class="p">({</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">input</span><span class="o">$</span><span class="n">submit</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">shinyjs</span><span class="o">::</span><span class="n">info</span><span class="p">(</span><span class="s2">"Thank you!"</span><span class="p">)</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">})</span><span class="w">
</span></code></pre>
</div>

<p><strong>The final code looks like this</strong> (I’m using the more compact <code class="highlighter-rouge">toggle*</code> version where possible)</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">shiny</span><span class="p">)</span><span class="w">
</span><span class="n">shinyApp</span><span class="p">(</span><span class="w">
  </span><span class="n">ui</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fluidPage</span><span class="p">(</span><span class="w">
    </span><span class="n">shinyjs</span><span class="o">::</span><span class="n">useShinyjs</span><span class="p">(),</span><span class="w">
    </span><span class="n">shinyjs</span><span class="o">::</span><span class="n">inlineCSS</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="n">.big</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"font-size: 2em"</span><span class="p">)),</span><span class="w">
    </span><span class="n">div</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"myapp"</span><span class="p">,</span><span class="w">
        </span><span class="n">h</span><span class="m">2</span><span class="p">(</span><span class="s2">"shinyjs demo"</span><span class="p">),</span><span class="w">
        </span><span class="n">checkboxInput</span><span class="p">(</span><span class="s2">"big"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Bigger text"</span><span class="p">,</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">),</span><span class="w">
        </span><span class="n">textInput</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Name"</span><span class="p">,</span><span class="w"> </span><span class="s2">""</span><span class="p">),</span><span class="w">
        </span><span class="n">a</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"toggleAdvanced"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Show/hide advanced info"</span><span class="p">,</span><span class="w"> </span><span class="n">href</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#"</span><span class="p">),</span><span class="w">
        </span><span class="n">shinyjs</span><span class="o">::</span><span class="n">hidden</span><span class="p">(</span><span class="w">
          </span><span class="n">div</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"advanced"</span><span class="p">,</span><span class="w">
            </span><span class="n">numericInput</span><span class="p">(</span><span class="s2">"age"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Age"</span><span class="p">,</span><span class="w"> </span><span class="m">30</span><span class="p">),</span><span class="w">
            </span><span class="n">textInput</span><span class="p">(</span><span class="s2">"company"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Company"</span><span class="p">,</span><span class="w"> </span><span class="s2">""</span><span class="p">)</span><span class="w">
          </span><span class="p">)</span><span class="w">
        </span><span class="p">),</span><span class="w">
        </span><span class="n">p</span><span class="p">(</span><span class="s2">"Timestamp: "</span><span class="p">,</span><span class="w">
          </span><span class="n">span</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"time"</span><span class="p">,</span><span class="w"> </span><span class="n">date</span><span class="p">()),</span><span class="w">
          </span><span class="n">a</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"update"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Update"</span><span class="p">,</span><span class="w"> </span><span class="n">href</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#"</span><span class="p">)</span><span class="w">
        </span><span class="p">),</span><span class="w">
        </span><span class="n">actionButton</span><span class="p">(</span><span class="s2">"submit"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Submit"</span><span class="p">)</span><span class="w">
    </span><span class="p">)</span><span class="w">
  </span><span class="p">),</span><span class="w">
  
  </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">output</span><span class="p">,</span><span class="w"> </span><span class="n">session</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">observe</span><span class="p">({</span><span class="w">
      </span><span class="n">toggleState</span><span class="p">(</span><span class="s2">"submit"</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="nf">is.null</span><span class="p">(</span><span class="n">input</span><span class="o">$</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">name</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s2">""</span><span class="p">)</span><span class="w">
    </span><span class="p">})</span><span class="w">
    
    </span><span class="n">shinyjs</span><span class="o">::</span><span class="n">onclick</span><span class="p">(</span><span class="s2">"toggleAdvanced"</span><span class="p">,</span><span class="w">
                     </span><span class="n">shinyjs</span><span class="o">::</span><span class="n">toggle</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"advanced"</span><span class="p">,</span><span class="w"> </span><span class="n">anim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">))</span><span class="w">    
    
    </span><span class="n">shinyjs</span><span class="o">::</span><span class="n">onclick</span><span class="p">(</span><span class="s2">"update"</span><span class="p">,</span><span class="w"> </span><span class="n">shinyjs</span><span class="o">::</span><span class="n">html</span><span class="p">(</span><span class="s2">"time"</span><span class="p">,</span><span class="w"> </span><span class="n">date</span><span class="p">()))</span><span class="w">
    
    </span><span class="n">observe</span><span class="p">({</span><span class="w">
      </span><span class="n">toggleClass</span><span class="p">(</span><span class="s2">"myapp"</span><span class="p">,</span><span class="w"> </span><span class="s2">"big"</span><span class="p">,</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">big</span><span class="p">)</span><span class="w">
    </span><span class="p">})</span><span class="w">
    
    </span><span class="n">observe</span><span class="p">({</span><span class="w">
      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">input</span><span class="o">$</span><span class="n">submit</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">shinyjs</span><span class="o">::</span><span class="n">info</span><span class="p">(</span><span class="s2">"Thank you!"</span><span class="p">)</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">})</span><span class="w">    
  </span><span class="p">}</span><span class="w">
</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p>You can view the final app
<a href="http://daattali.com/shiny/shinyjs-basic/">here</a> (<a href="https://daattali.shinyapps.io/shinyjs-basic/">mirror</a>).</p>

<h2 id="altenatives-using-native-shiny">Altenatives using native Shiny</h2>

<h3 id="shinyconditionalpanel-vs-shinyjshideshowtogglehidden">shiny::conditionalPanel vs shinyjs::hide/show/toggle/hidden</h3>

<p>It is possible to achieve a similar behaviour to <code class="highlighter-rouge">hide</code> and <code class="highlighter-rouge">show</code> by
using <code class="highlighter-rouge">shiny::conditionalPanel</code>, though I’ve experienced that using
<code class="highlighter-rouge">conditionalPanel</code> often gets my UI to a messier state. I still use
<code class="highlighter-rouge">conditionalPanel</code> sometimes for basic use cases, but when there is some
logic involved in hiding/showing, I find it much easier to move that
logic to the server and use <code class="highlighter-rouge">hide</code>/<code class="highlighter-rouge">show</code>. I also think it’s generally a
better idea to keep most of the logic in the server, and using
<code class="highlighter-rouge">conditionalPanel</code> violates that rule.<br />
Implementing the <code class="highlighter-rouge">shinyjs::toggle</code> or <code class="highlighter-rouge">shinyjs::hidden</code> behaviour with
pure Shiny is also possible but it also results in messier and less
intuitive code.</p>

<h3 id="shinyrender-and-shinyupdate-vs-shinyjshtml">shiny::render* and shiny::update* vs shinyjs::html</h3>

<p>The <code class="highlighter-rouge">shinyjs::html</code> function can be used to change the text inside an
element by either overwriting it or appending to it. I mostly intended
for this function to be used to change the text, though it can also be
used to add HTML elements. There are many Shiny functions that allow you
to change the text of an element. For example, <code class="highlighter-rouge">renderText</code> is used on a
<code class="highlighter-rouge">textOutput</code> tag and <code class="highlighter-rouge">updateTextInput</code> is used on a <code class="highlighter-rouge">textInput</code> tag.
These functions are useful, but sometimes I like to be able to just
cange the text of a tag without having to know/specify exactly what it
was declared in the UI. These functions also don’t work on tags that are
not defined as reactive, so if I just have a <code class="highlighter-rouge">p(id = "time", date())</code> it
would be impossible to change it. I also don’t think it’s possible to
append rather than overwrite with Shiny, and you can’t use HTML unless
the element is declared as <code class="highlighter-rouge">uiOutput</code> or something similar.</p>

<p>There is something to be said about the fact that the pure Shiny
functions are safer and more strict, but I personally like having the
extra flexibility sometimes, even though the <code class="highlighter-rouge">html</code> function feels like
it doesn’t really follow Shiny’s patterns. I still use the Shiny
functions often, but I find <code class="highlighter-rouge">html</code> useful as well.</p>

<h3 id="shinyobserveevent-vs-shinyjsonclick">shiny::observeEvent vs shinyjs::onclick</h3>

<p>The <code class="highlighter-rouge">onclick</code> function was initially written because I wanted a way to
click on a button that will cause a section to show/hide, like so:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">shinyjs</span><span class="o">::</span><span class="n">onclick</span><span class="p">(</span><span class="s2">"toggleLink"</span><span class="p">,</span><span class="w"> </span><span class="n">shinyjs</span><span class="o">::</span><span class="n">toggle</span><span class="p">(</span><span class="s2">"section"</span><span class="p">))</span><span class="w">
</span></code></pre>
</div>

<p>RStudio very recently published an article describing several design
patterns for using buttons, and from that article I learned that I can
do what I wanted with <code class="highlighter-rouge">observeEvent</code>:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">observeEvent</span><span class="p">(</span><span class="s2">"input$toggleLink"</span><span class="p">,</span><span class="w"> </span><span class="n">shinyjs</span><span class="o">::</span><span class="n">toggle</span><span class="p">(</span><span class="s2">"section"</span><span class="p">))</span><span class="w">
</span></code></pre>
</div>

<p>When I first discovered this, I thought of removing the <code class="highlighter-rouge">onclick</code>
function because it’s not useful anymore, but then I realized there are
differences that still make it useful. <code class="highlighter-rouge">observeEvent</code> responds to
“event-like” reactive values, while <code class="highlighter-rouge">onclick</code> responds to a mouse click
on an element. This means that <code class="highlighter-rouge">observeEvent</code> can be used for any input
element (not only clickable things), but <code class="highlighter-rouge">onclick</code> can be used for
responding to a click on any element, even if it is not an input tag.
Another small feature I wanted to support is the ability to overwrite vs
add the click handler (= R code to run on a click). This would not be
used for most basic apps, but for more complex dynamic apps it might
come in handy.</p>

<h2 id="main-todo">Main TODO</h2>
<p>There are several improvements I still want to provide, but the biggest thing on my TODO list is to easily allow users to extend <code class="highlighter-rouge">shinyjs</code>. This would mean that you could just write a JavaScript function, tell <code class="highlighter-rouge">shinyjs</code> where to find it, and then <code class="highlighter-rouge">shinyjs</code> will do some magic to let you call that function as if it was regular R code.</p>

<h2 id="known-issues">Known issues</h2>

<ul>
  <li>
    <p>There are some input tags that <code class="highlighter-rouge">shiny</code> wraps in extra HTML, and this can interfere with <code class="highlighter-rouge">shinyj</code> functions.  For example, using <code class="highlighter-rouge">selectInput("foo")</code> by default uses selectize JS, which hides the real select box that has id <code class="highlighter-rouge">foo</code> and instead makes a more visually appealing box. By this means that now calling <code class="highlighter-rouge">show</code> or <code class="highlighter-rouge">hide</code> on <code class="highlighter-rouge">foo</code> won’t work. <strong>A workaround</strong> is to wrap the tag with a div, and call <code class="highlighter-rouge">hide</code>/<code class="highlighter-rouge">show</code> on that div instead.</p>
  </li>
  <li>
    <p>The previous workaround works for some <code class="highlighter-rouge">shinyjs</code> functions such as <code class="highlighter-rouge">hide</code> and <code class="highlighter-rouge">show</code>, but not all. For example, the <code class="highlighter-rouge">enable</code> and <code class="highlighter-rouge">disable</code> functions won’t work on fake select boxes (the ones generated with selectize) because they don’t follow the normal HTML rules for disabling inputs. This is one instance of the problem that I intend on solving becuase there is indeed a way to disable selectize inputs, but it’s important to be aware of the underlying isuee - because <code class="highlighter-rouge">shiny</code> sometimes adds HTML around an element that you create, trying to retrieve that element by its id might not always work unfortunately.</p>
  </li>
</ul>

<h2 id="contributions">Contributions</h2>

<p>If anyone has any suggestions or feedback, I would love to hear about it. If you have improvements, feel free to make a pull request.  I’d like to give a special thanks to the Shiny developers, especially Joe Cheng for always answering all my Shiny questions.</p>

      </article>
      
      
        <div class="blog-tags">
          Tags: professional, rstats, r, r-bloggers, shiny, packages, shinyjs, popular
        </div>
      

      
  <div class="share-section">
    <h1 class="share-title">Liked what you read?</h1>
    
    
      <div class="share-buttons">
        
        
        
        
    
        
        
        
        
        <a href="http://localhost:4000/contact" data-ga-event=1 data-ga-category="share" data-ga-action="message" data-ga-label="/2015/04/23/shinyjs-r-package/">
          Let me know
        </a>
        <!--
        <a href="https://www.facebook.com/dialog/feed?app_id=536330676521989&link=http://localhost:4000/2015/04/23/shinyjs-r-package/&name=Introducing shinyjs: perform common JavaScript operations in Shiny apps using plain R code&caption=nitinitleen1.github.io&redirect_uri=http://localhost:4000/2015/04/23/shinyjs-r-package/?message=Thanks for sharing!" data-ga-event=1 data-ga-category="share" data-ga-action="facebook" data-ga-label="/2015/04/23/shinyjs-r-package/">
          Share on Facebook
        </a>
        -->
        <a href="https://www.paypal.me/daattali/10" data-ga-event=1 data-ga-category="share" data-ga-action="donate" data-ga-label="/2015/04/23/shinyjs-r-package/">
          Support me
        </a>
        <a href="https://twitter.com/intent/tweet?url=http://localhost:4000/2015/04/23/shinyjs-r-package/&via=daattali&hashtags=rstats&text=Introducing shinyjs: perform common JavaScript operations in Shiny apps using plain R code" data-ga-event=1 data-ga-category="share" data-ga-action="twitter" data-ga-label="/2015/04/23/shinyjs-r-package/">
          Tweet it
        </a>
      </div>
    
    
    
      <!-- MailChimp Signup Form -->
      <div id="mailchimp-subscribe-section-2">
        <div id="mc_embed_signup-2">
          <form action="//deanattali.us14.list-manage.com/subscribe/post?u=a579a88c8f09f9b8502b9d0c3&amp;id=c180f5773c" method="post" id="mc-embedded-subscribe-form-2" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
            <div id="mc_embed_signup_scroll-2">
      	      <label for="mce-EMAIL-2">Sign up to my Shiny newsletter</label>
              <div class="container">
                <div class="row">
                  <div class="col-xs-8">
                    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL-2" placeholder="Email" required="">
                  </div>
                  <div class="col-xs-4">
                    <input type="text" value="" name="FNAME" class="text" id="mce-FNAME-2" placeholder="Name" required="">
                  </div>
                </div>
              </div>
              <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_a579a88c8f09f9b8502b9d0c3_c180f5773c" tabindex="-1" value=""></div>
              <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe-2" class="button">
            </div>
          </form>
        </div>
      </div>
     

  </div>


      
      

      <ul class="pager blog-pager">
        
          <li class="previous">
            <a href="/2015/04/21/r-package-shiny-app/" data-toggle="tooltip" data-placement="top" title="Supplementing your R package with a Shiny app">&larr; Previous Post</a>
          </li>
        
        
          <li class="next">
            <a href="/2015/05/09/setup-rstudio-shiny-server-digital-ocean/" data-toggle="tooltip" data-placement="top" title="How to get your very own RStudio Server and Shiny Server with DigitalOcean">Next Post &rarr;</a>
          </li>
        
      </ul>

      
        <div class="disqus-comments">
          
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">
	    var disqus_shortname = 'nitin-site';
	    // ensure that pages with query string or anchor get the same discussion
            var url_parts = window.location.href.split("?");
            url_parts = url_parts[0].split("#");
            disqus_url = url_parts[0];
            disqus_url = disqus_url.replace(/(\/)*$/, "/"); // make sure the URL ends with one slash
            
            // Jekyll 3 caused so many bugs, I'm tired of fixing them one by one properly, so I'll just hack it...
            // https://github.com/jekyll/jekyll/issues/4483
            // The projects page now has a trailing slash, it didn't used to
            if (disqus_url.substr(-9) == "projects/") {
            	disqus_url = disqus_url.substr(0, disqus_url.length - 1);
            }

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>


        </div>
      
      
      <div id="scroll-box">
  <div id="scroll-box-close">&times;</div>
  <div id="scroll-box-hire">
    Need Shiny help?
    <a href="/shiny">Hire me!</a>
  </div>
  <div id="mailchimp-subscribe-section">
    <div id="mc_embed_signup">
      <form action="//deanattali.us14.list-manage.com/subscribe/post?u=a579a88c8f09f9b8502b9d0c3&amp;id=c180f5773c" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
        <div id="mc_embed_signup_scroll">
  	      <label for="mce-EMAIL">Sign up to my Shiny newsletter</label>
          <div class="container">
            <div class="row">
              <div class="col-xs-8">
  	            <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Email" required="">
              </div>
              <div class="col-xs-4">
                <input type="text" value="" name="FNAME" class="text" id="mce-FNAME" placeholder="Name" required="">
              </div>
            </div>
          </div>
          <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_a579a88c8f09f9b8502b9d0c3_c180f5773c" tabindex="-1" value=""></div>
          <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button" title="Sign up to my Shiny newsletter">
        </div>
      </form>
    </div>
  </div>
  <div id="scroll-box-contact">
    Questions/comments?
    <a href="/contact">Contact me!</a>
  </div>
</div>

    </div>
  </div>
</div>


    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">

          
          <li>
            <a href="mailto:nitin.iiitv@gmail.com?subject=Hello from nitinitleen1.github.io" title="Email me">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/nitinitleen1" title="Twitter">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://github.com/nitinitleen1" title="GitHub">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://www.facebook.com/nitinitleen1" title="Facebook">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://stackoverflow.com/nitinitleen1" title="StackOverflow">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          

          

        </ul>

        <p class="copyright text-muted">
          &copy; Nitin Singh
          &nbsp;&bull;&nbsp;
          2019

          
          &nbsp;&bull;&nbsp;
          <a href="mailto:nitin.iiitv@gmail.com?subject=Hello from nitinitleen1.github.io">nitin.iiitv@gmail.com</a>
          
        </p>
        <p class="theme-by text-muted">
          Theme by
          <a href="http://deanattali.com/beautiful-jekyll/">beautiful-jekyll</a>
        </p>
      </div>
    </div>
  </div>
</footer>

    
    


  
	<script src="/js/jquery-1.11.2.min.js"></script>
  
	<script src="/js/bootstrap.min.js"></script>
  
	<script src="/js/js.cookie.js"></script>
  
	<script src="/js/main.js"></script>
  







	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-59820529-1', 'auto');
		ga('send', 'pageview');
	</script>
	<!-- End Google Analytics -->



     
      <!-- AddThis plugin (floating social media sharing buttons on the left of each post) -->
      <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-57d65a4d97789dd1"></script>
    
    
  </body>
</html>
