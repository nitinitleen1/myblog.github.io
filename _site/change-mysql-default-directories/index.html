<!DOCTYPE html>
<!--
    So Simple Jekyll Theme 3.1.1
    Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
    Free for personal and commercial use under the MIT license
    https://github.com/mmistakes/so-simple-theme/blob/master/LICENSE
-->
<html lang="en-US" class="no-js">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:image" content="http://localhost:4000">
<script data-ad-client="ca-pub-9518508677792760" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<link rel="apple-touch-icon" sizes="57x57" href="/favicon.ico/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/favicon.ico/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/favicon.ico/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/favicon.ico/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/favicon.ico/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/favicon.ico/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/favicon.ico/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/favicon.ico/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/favicon.ico/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon.ico/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico/favicon-16x16.png">
<link rel="manifest" href="/favicon.ico/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">  
  

  
    <title>How To Change MySQL Default Data,Binlog,Error Log Directories</title>
    <meta name="description" content="">
    <link rel="canonical" href="http://localhost:4000/change-mysql-default-directories/">
  

  <script>
    /* Cut the mustard */
    if ( 'querySelector' in document && 'addEventListener' in window ) {
      document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + 'js';
    }
  </script>

  <link rel="stylesheet" href="/assets/css/main.css">
  <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  <link rel="stylesheet" href="/assets/css/applause-button.css" />
   <script src="/assets/js/applause-button.js"></script>

</head>


  <body class="layout--post  how-to-change-mysql-default-data-binlog-error-log-directories">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#primary-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    
  <div class="navigation-wrapper">
    <a href="#menu-toggle" id="menu-toggle">Menu</a>
    <nav id="primary-nav" class="site-nav animated drop">
      <ul><li><a href="/">Home</a></li><li><a href="/posts/">Posts</a></li><li><a href="/categories/">Categories</a></li><li><a href="/tags/">Tags</a></li><li><a href="https://medium.com/@bhuvithedataguy">BigData Articles</a></li><li><a href="/search/">Search</a></li></ul>
    </nav>
  </div><!-- /.navigation-wrapper -->


    <header class="masthead">
  <div class="wrap">
    
    
    
      
        <div class="site-title animated fadeIn"><a href="/">Nitin Kumar Singh | Data Architect</a></div>
      
      <p class="site-description animated fadeIn" itemprop="description">Mi occupo di web disign, grafica, web writing e sviluppo web.</p>
    
  </div>
</header><!-- /.masthead -->


    <main id="main" class="main-content" aria-label="Content">
  <article class="h-entry">
    

    <div class="page-wrapper">
      <header class="page-header">
        
        
          <h1 id="page-title" class="page-title p-name">How To Change MySQL Default Data,Binlog,Error Log Directories
</h1>
        

      </header>
      
      <div class="page-sidebar">
        <div class="page-author h-card p-author"><div class="author-info"><div class="author-name">
        <span class="p-name">Nitin Kumar Singh</span>
      </div>
    <time class="page-date dt-published" datetime="2017-11-04T17:15:29+05:30"><a class="u-url" href="">November 4, 2017</a>
</time>

  </div>
</div>

        
  <h3 class="page-taxonomies-title">Categories</h3>
  <ul class="page-taxonomies"><li class="page-taxonomy">MySQL</li>
  </ul>


        
  <h3 class="page-taxonomies-title">Tags</h3>
  <ul class="page-taxonomies"><li class="page-taxonomy">linux</li><li class="page-taxonomy">mysql</li><li class="page-taxonomy">ubuntu</li>
  </ul>


        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- ad-vertical -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-9518508677792760"
     data-ad-slot="4154399056"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
        <br/>
        <br/>
        <applause-button style="width: 58px; height: 58px; text-align:right" color="black" multiclap="true">

      </div>

      <div class="page-content">
        <div class="e-content">

          <p><img src="/assets/mysql-change-default-directories.jpg" alt="change mysql default data,binlog, error log directories" /></p>

<p>MySQL Change default directories</p>

<p>While reading this heading everybody things like, yeah its pretty old topic, we can get many articles by googling. But you know what sometimes well known things never work for us. This time it happened for me, my bad. I have done this many times. But most of us changed the default Data Directory only. Only a few of us thinking about change MySQL default data,binlog, error log directories.</p>

<p>I can easily change the Data directory, But while enabling binlog, and error log I got an error.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">mysqld: File <span class="s1">'/mysql/binlog/mysql-bin.index'</span> not found <span class="o">(</span>Errcode: 13<span class="o">)</span></code></pre></figure>

<p>So this is the reason for wrote this blog.</p>

<h2 id="my-server-setup">My Server Setup:</h2>

<p><strong>OS:</strong> Ubuntu 14.04LTS 64Bit</p>

<p><strong>MySQL:</strong> 5.5.58</p>

<h2 id="destination-directories">Destination Directories:</h2>

<p><strong>Data:</strong> /mysql/data</p>

<p><strong>Binlog: </strong>/mysql/data</p>

<p><strong>ErrorLog:</strong> /mysql/error</p>

<p><strong>SlowLog:</strong> /mysql/sowlog</p>

<h3 id="create-the-directories">Create the Directories:</h3>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">mkdir</span> <span class="nt">-p</span> /mysql/data
<span class="nb">mkdir</span> <span class="nt">-p</span> /mysql/binlog
<span class="nb">mkdir</span> <span class="nt">-p</span> /mysql/error
<span class="nb">mkdir</span> <span class="nt">-p</span> /mysql/sowlog</code></pre></figure>

<p>Set permission:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">chown</span> <span class="nt">-R</span> mysql:mysql /mysql/
<span class="nb">chmod</span> <span class="nt">-R</span> 600 /mysql</code></pre></figure>

<p>Sync the data from old data directory to the new directory.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">service mysql stop
<span class="nb">sudo </span>rsync <span class="nt">-av</span> /var/lib/mysql/<span class="k">*</span> /mysql/data/</code></pre></figure>

<h3 id="edit-the-mycnf-file">Edit the my.cnf file</h3>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="o">[</span>mysqld]
<span class="c">#Data</span>
datadir <span class="o">=</span> /mysql/data/
<span class="c">#Binlog</span>
log_bin <span class="o">=</span> /mysql/binlog/mysql_bin
<span class="c">#Errorlog</span>
log_error <span class="o">=</span> /mysql/error/mysql_error.log
<span class="c">#slowlog</span>
slow_query_log_file <span class="o">=</span> /mysql/sowlog/mysql_slow.log
<span class="o">[</span>mysql]
port <span class="o">=</span> 3306
socket <span class="o">=</span> /mysql/data/mysql.sock</code></pre></figure>

<p>Now its time to modify the apparmor files.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">vi /etc/apparmor.d/usr.sbin.mysqld

<span class="c">#fine the below lines</span>
/var/lib/mysql r,
/var/lib/mysql/<span class="k">**</span> rwk,

<span class="c">#replace with</span>
/mysql r,
/mysql/<span class="k">**</span> rwk,</code></pre></figure>

<p>Thats it, now start mysql.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">service mysql start</code></pre></figure>

        </div>
        <hr>
        <h3>Advertisement</h3>
         <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- ad-horizontal -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-9518508677792760"
     data-ad-slot="4874591962"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
        <hr>
        <h3> Share this article </h3>
      
        

        

        <nav class="page-pagination" role="navigation">
  
    <a class="page-previous" href="/compare-two-sql-server-databases-using-tsql/">
      <h4 class="page-pagination-label">Previous</h4>
      <span class="page-pagination-title">
        <i class="fas fa-arrow-left"></i> Compare Two SQL Server Databases using Tsql

      </span>
    </a>
  

  
    <a class="page-next" href="/postgrsql-insecure-directory-in-env-path/">
      <h4 class="page-pagination-label">Next</h4>
      <span class="page-pagination-title">
        Postgresql Insecure directory in ENV PATH - Unable To Start
 <i class="fas fa-arrow-right"></i>
      </span>
    </a>
  
</nav>

      </div>
    </div>
  </article>
</main>


    <footer id="footer" class="site-footer">
  <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
<div class="copyright">
    
      <p>&copy; 2020 Nitin Kumar Singh | Data Architect. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/mmistakes/so-simple-theme" rel="nofollow">So Simple</a>.</p>
    
  </div>
</footer>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script>


  </body>

</html>
